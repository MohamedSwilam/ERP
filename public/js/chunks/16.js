(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"1w2d":function(t,e,r){"use strict";var a={components:{BAvatar:r("G/QR").a},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},s=(r("MOdh"),r("KHd+")),i=Object(s.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"toastification"},[r("div",{staticClass:"d-flex align-items-start"},[r("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[r("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),t._v(" "),r("div",{staticClass:"d-flex flex-grow-1"},[r("div",[t.title?r("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t._v(" "),t.text?r("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),t._v(" "),r("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():r("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])}),[],!1,null,"13ed5408",null);e.a=i.exports},"4cv3":function(t,e,r){"use strict";var a={bind:function(t,e){var r={event:"mousedown",transition:600};!function(t,e){t.forEach((function(t){isNaN(Number(t))?e.event=t:e.transition=t}))}(Object.keys(e.modifiers),r),t.addEventListener(r.event,(function(a){!function(t,e){var a=e,o=parseInt(getComputedStyle(a).borderWidth.replace("px","")),n=a.getBoundingClientRect(),l=n.left,c=n.top,d=a.offsetWidth,u=a.offsetHeight,p=t.clientX-l,m=t.clientY-c,f=Math.max(p,d-p),h=Math.max(m,u-m),v=window.getComputedStyle(a),g=Math.sqrt(f*f+h*h),b=o>0?o:0,y=document.createElement("div"),_=document.createElement("div");_.className="ripple-container",y.className="ripple",y.style.marginTop="0px",y.style.marginLeft="0px",y.style.width="1px",y.style.height="1px",y.style.transition="all "+r.transition+"ms cubic-bezier(0.4, 0, 0.2, 1)",y.style.borderRadius="50%",y.style.pointerEvents="none",y.style.position="relative",y.style.zIndex=i,y.style.backgroundColor=s,_.style.position="absolute",_.style.left=0-b+"px",_.style.top=0-b+"px",_.style.height="0",_.style.width="0",_.style.pointerEvents="none",_.style.overflow="hidden";var x=a.style.position.length>0?a.style.position:getComputedStyle(a).position;"relative"!==x&&(a.style.position="relative");function k(){setTimeout((function(){y.style.backgroundColor="rgba(0, 0, 0, 0)"}),250),setTimeout((function(){_.parentNode.removeChild(_)}),850),e.removeEventListener("mouseup",k,!1),setTimeout((function(){for(var t=!0,e=0;e<a.childNodes.length;e++)"ripple-container"===a.childNodes[e].className&&(t=!1);t&&(a.style.position="static"!==x?x:"")}),r.transition+250)}_.appendChild(y),a.appendChild(_),y.style.marginLeft=p+"px",y.style.marginTop=m+"px",_.style.width=d+"px",_.style.height=u+"px",_.style.borderTopLeftRadius=v.borderTopLeftRadius,_.style.borderTopRightRadius=v.borderTopRightRadius,_.style.borderBottomLeftRadius=v.borderBottomLeftRadius,_.style.borderBottomRightRadius=v.borderBottomRightRadius,_.style.direction="ltr",setTimeout((function(){y.style.width=2*g+"px",y.style.height=2*g+"px",y.style.marginLeft=p-g+"px",y.style.marginTop=m-g+"px"}),0),"mousedown"===t.type?e.addEventListener("mouseup",k,!1):k()}(a,t,e.value)}));var s=e.value||a.color||"rgba(0, 0, 0, 0.35)",i=a.zIndex||"9999"}};e.a=a},"9nhG":function(t,e,r){"use strict";r.r(e);var a=r("1w2d"),s={name:"BrowseOrders",directives:{Ripple:r("4cv3").a},data:function(){return{orders:{isLoading:!1,search:"",paginateOptions:[5,10,25,50,100,250],recordsPerPage:50,fields:[{key:"id",label:"ID"},{key:"customers",label:"Customer(s)"},{key:"package",label:"Package"},{key:"price",label:"Price"},{key:"total_hours",label:"Total Hours"},{key:"remaining_hours",label:"Remaining Hours"},{key:"seller",label:"Sales"},{key:"created_at",label:"Created At"},{key:"last_visit",label:"Last Visit"},{key:"last_comment",label:"Last Comment"}],data:[],meta:{count:0,current_page:1,links:{},per_page:0,total:0,total_pages:0}}}},mounted:function(){this.browseOrders(this.orders.meta.current_page)},methods:{browseOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.orders.isLoading=!0,this.$store.dispatch("orders/browse","?paginate=".concat(this.orders.recordsPerPage,"&page=").concat(e,"&filter[customer_filter]=").concat(this.orders.search,"&lastVisit=true&lastComment=true")).then((function(e){t.orders.data=e.data.data,t.orders.meta=e.data.meta.pagination,t.orders.isLoading=!1})).catch((function(e){console.error(e),t.orders.isLoading=!1}))},deleteOrder:function(t){var e=this;this.$bvModal.msgBoxConfirm("You will not be able to retrieve this again!",{title:"Are you sure?",size:"sm",okTitle:"Yes, Delete!",okVariant:"danger",cancelTitle:"Cancel",cancelVariant:"outline-primary",centered:!0}).then((function(r){r&&e.$store.dispatch("orders/delete",t.item.id).then((function(r){e.orders.data=e.orders.data.filter((function(e){return e.id!==t.item.id})),e.$toast({component:a.a,props:{title:"Success",icon:"CheckCircleIcon",text:r.data.message,variant:"success"}},{position:"bottom-right",timeout:5e3})})).catch((function(t){console.log(t)}))}))}}},i=(r("vT3Z"),r("KHd+")),o=Object(i.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-overlay",{attrs:{show:t.orders.isLoading,rounded:"sm"}},[r("b-card-actions",{ref:"orderCard",attrs:{title:"Operations","action-collapse":""}},[r("b-row",[r("b-col",{attrs:{cols:"6","align-h":"center"}},[r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255,255,255,0.15)",expression:"'rgba(255,255,255,0.15)'",modifiers:{400:!0}}],attrs:{size:"sm",variant:"primary",to:"/orders/create"}},[r("feather-icon",{staticClass:"mr-50",attrs:{icon:"FileIcon"}}),t._v(" "),r("span",{staticClass:"align-middle"},[t._v("Export CSV")])],1)],1),t._v(" "),r("b-col",{staticClass:"text-right mb-2",attrs:{cols:"6","align-h":"center"}},[r("b-input-group",{staticStyle:{position:"relative",top:"13px"}},[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("feather-icon",{attrs:{icon:"SearchIcon"}})],1),t._v(" "),r("b-form-input",{attrs:{id:"search",size:"sm",placeholder:"Search"},on:{change:t.browseOrders},model:{value:t.orders.search,callback:function(e){t.$set(t.orders,"search",e)},expression:"orders.search"}})],1)],1),t._v(" "),r("b-col",{attrs:{cols:"12"}},[r("b-table",{attrs:{responsive:"",outlined:!0,items:t.orders.data,fields:t.orders.fields,"head-variant":"dark"},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[r("router-link",{attrs:{to:"/orders/"+e.item.id}},[t._v("\n                    "+t._s(e.item.id)+"\n                  ")])]}},{key:"cell(customers)",fn:function(e){return t._l(e.item.customers,(function(e,a){return r("router-link",{key:a,attrs:{to:"/customers/"+e.id}},[r("b-badge",{staticClass:"mb-5-px",attrs:{variant:"primary"}},[t._v("\n                      #TKB"+t._s(e.id)+" - "+t._s(t._f("capitalize")(e.name))+"\n                    ")])],1)}))}},{key:"cell(package)",fn:function(e){return[r("router-link",{attrs:{to:"/packages/"+e.item.package.id}},[t._v("\n                    "+t._s(e.item.package.name)+"\n                  ")]),t._v(" "),r("br"),t._v(" ("+t._s(e.item.package.package_type.name)+")\n                ")]}},{key:"cell(price)",fn:function(e){return[t._v("\n                  "+t._s(e.item.package.price)+"\n                ")]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n                  "+t._s(t._f("date")(e.item.created_at,!0))+"\n                  "),r("br"),t._v("\n                  "+t._s(t._f("time")(e.item.created_at))+"\n                ")]}},{key:"cell(last_visit)",fn:function(e){return[t._v("\n                  "+t._s(e.item.last_visit.length>0?e.item.last_visit[0].date:"No Visits")+"\n                ")]}},{key:"cell(last_comment)",fn:function(e){return[e.item.last_comment.length>0?r("span",[t._v("\n                    "+t._s(t._f("date")(e.item.last_comment[0].created_at,!0))+"\n                    "),r("br"),t._v("\n                    "+t._s(t._f("time")(e.item.last_comment[0].created_at))+"\n                  ")]):r("span",[t._v("\n                    No Comments\n                  ")])]}}])})],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"2",sm:"4",xs:"4"}},[r("b-form-group",{staticClass:"mb-0"},[r("label",{staticClass:"d-inline-block text-sm-left mr-50"},[t._v("Per page")]),t._v(" "),r("b-form-select",{staticClass:"w-50",attrs:{id:"perPageSelect",size:"sm",options:t.orders.paginateOptions},on:{change:function(e){return t.browseOrders(1)}},model:{value:t.orders.recordsPerPage,callback:function(e){t.$set(t.orders,"recordsPerPage",e)},expression:"orders.recordsPerPage"}})],1)],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"10",sm:"8",xs:"8"}},[r("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.orders.meta.total,"per-page":t.orders.recordsPerPage,align:"right","first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},on:{change:t.browseOrders},scopedSlots:t._u([{key:"prev-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}]),model:{value:t.orders.meta.current_page,callback:function(e){t.$set(t.orders.meta,"current_page",e)},expression:"orders.meta.current_page"}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=o.exports},DEUr:function(t,e,r){var a=r("o1KL");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(a,s);a.locals&&(t.exports=a.locals)},IUGQ:function(t,e,r){var a=r("bZzA");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(a,s);a.locals&&(t.exports=a.locals)},MOdh:function(t,e,r){"use strict";r("DEUr")},bZzA:function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,"[dir] .table .thead-dark th{background-color:#195cff!important;border-color:#195cff!important}.dark-layout .table thead.thead-dark th,[dir] .dark-layout .table tfoot.thead-dark th{color:#fff!important}[dir] .mb-5-px{margin-bottom:5px}",""])},o1KL:function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".toastification-close-icon[data-v-13ed5408],.toastification-title[data-v-13ed5408]{line-height:26px}.toastification-title[data-v-13ed5408]{color:inherit}",""])},vT3Z:function(t,e,r){"use strict";r("IUGQ")}}]);